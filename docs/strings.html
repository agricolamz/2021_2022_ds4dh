<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Работа со строками | Наука о данных в R для программы Цифровых гуманитарных исследований</title>
  <meta name="description" content="3 Работа со строками | Наука о данных в R для программы Цифровых гуманитарных исследований" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Работа со строками | Наука о данных в R для программы Цифровых гуманитарных исследований" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Работа со строками | Наука о данных в R для программы Цифровых гуманитарных исследований" />
  
  
  

<meta name="author" content="Г. А. Мороз, И. С. Поздняков" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="viz_1.html"/>
<link rel="next" href="data_presentation.html"/>
<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Наука о данных в R для ЦГИ</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе<span></span></a></li>
<li class="chapter" data-level="2" data-path="viz_1.html"><a href="viz_1.html"><i class="fa fa-check"></i><b>2</b> Визуализация данных<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="viz_1.html"><a href="viz_1.html#зачем-визуализировать-данные"><i class="fa fa-check"></i><b>2.1</b> Зачем визуализировать данные?<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="viz_1.html"><a href="viz_1.html#квартет-анскомба"><i class="fa fa-check"></i><b>2.1.1</b> Квартет Анскомба<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="viz_1.html"><a href="viz_1.html#датазаурус"><i class="fa fa-check"></i><b>2.1.2</b> Датазаурус<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="viz_1.html"><a href="viz_1.html#основы-ggplot2"><i class="fa fa-check"></i><b>2.2</b> Основы <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="viz_1.html"><a href="viz_1.html#диаграмма-рассеяния-scaterplot"><i class="fa fa-check"></i><b>2.2.1</b> Диаграмма рассеяния (Scaterplot)<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="viz_1.html"><a href="viz_1.html#слои"><i class="fa fa-check"></i><b>2.2.2</b> Слои<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="viz_1.html"><a href="viz_1.html#aes"><i class="fa fa-check"></i><b>2.2.3</b> <code>aes()</code><span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="viz_1.html"><a href="viz_1.html#оформление"><i class="fa fa-check"></i><b>2.2.4</b> Оформление<span></span></a></li>
<li class="chapter" data-level="2.2.5" data-path="viz_1.html"><a href="viz_1.html#логарифмические-шкалы"><i class="fa fa-check"></i><b>2.2.5</b> Логарифмические шкалы<span></span></a></li>
<li class="chapter" data-level="2.2.6" data-path="viz_1.html"><a href="viz_1.html#annotate"><i class="fa fa-check"></i><b>2.2.6</b> <code>annotate()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="viz_1.html"><a href="viz_1.html#столбчатые-диаграммы-barplots"><i class="fa fa-check"></i><b>2.3</b> Столбчатые диаграммы (barplots)<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="viz_1.html"><a href="viz_1.html#факторы"><i class="fa fa-check"></i><b>2.4</b> Факторы<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="viz_1.html"><a href="viz_1.html#дотплот"><i class="fa fa-check"></i><b>2.5</b> Дотплот<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="viz_1.html"><a href="viz_1.html#гистограммы"><i class="fa fa-check"></i><b>2.6</b> Гистограммы<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="viz_1.html"><a href="viz_1.html#функции-плотности"><i class="fa fa-check"></i><b>2.7</b> Функции плотности<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="viz_1.html"><a href="viz_1.html#точки-джиттер-jitter-вайолинплот-violinplot-ящики-с-усами-boxplot"><i class="fa fa-check"></i><b>2.8</b> Точки, джиттер (jitter), вайолинплот (violinplot), ящики с усами (boxplot),<span></span></a></li>
<li class="chapter" data-level="2.9" data-path="viz_1.html"><a href="viz_1.html#фасетизация"><i class="fa fa-check"></i><b>2.9</b> Фасетизация<span></span></a></li>
<li class="chapter" data-level="2.10" data-path="viz_1.html"><a href="viz_1.html#визуализация-комбинаций-признаков"><i class="fa fa-check"></i><b>2.10</b> Визуализация комбинаций признаков<span></span></a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="viz_1.html"><a href="viz_1.html#потоковая-диаграмма-sankey-diagram"><i class="fa fa-check"></i><b>2.10.1</b> Потоковая Диаграмма (Sankey diagram)<span></span></a></li>
<li class="chapter" data-level="2.10.2" data-path="viz_1.html"><a href="viz_1.html#upset-plot"><i class="fa fa-check"></i><b>2.10.2</b> UpSet Plot<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>3</b> Работа со строками<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="strings.html"><a href="strings.html#работа-со-строками-в-r"><i class="fa fa-check"></i><b>3.1</b> Работа со строками в R<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="strings.html"><a href="strings.html#как-получить-строку"><i class="fa fa-check"></i><b>3.2</b> Как получить строку?<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="strings.html"><a href="strings.html#соединение-и-разделение-строк"><i class="fa fa-check"></i><b>3.3</b> Соединение и разделение строк<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="strings.html"><a href="strings.html#количество-символов"><i class="fa fa-check"></i><b>3.4</b> Количество символов<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="strings.html"><a href="strings.html#подсчет-количества-символов"><i class="fa fa-check"></i><b>3.4.1</b> Подсчет количества символов<span></span></a></li>
<li class="chapter" data-level="3.4.2" data-path="strings.html"><a href="strings.html#подгонка-количества-символов"><i class="fa fa-check"></i><b>3.4.2</b> Подгонка количества символов<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="strings.html"><a href="strings.html#сортировка"><i class="fa fa-check"></i><b>3.5</b> Сортировка<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="strings.html"><a href="strings.html#поиск-подстроки"><i class="fa fa-check"></i><b>3.6</b> Поиск подстроки<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="strings.html"><a href="strings.html#изменение-строк"><i class="fa fa-check"></i><b>3.7</b> Изменение строк<span></span></a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="strings.html"><a href="strings.html#изменение-регистра"><i class="fa fa-check"></i><b>3.7.1</b> Изменение регистра<span></span></a></li>
<li class="chapter" data-level="3.7.2" data-path="strings.html"><a href="strings.html#выделение-подстроки"><i class="fa fa-check"></i><b>3.7.2</b> Выделение подстроки<span></span></a></li>
<li class="chapter" data-level="3.7.3" data-path="strings.html"><a href="strings.html#замена-подстроки"><i class="fa fa-check"></i><b>3.7.3</b> Замена подстроки<span></span></a></li>
<li class="chapter" data-level="3.7.4" data-path="strings.html"><a href="strings.html#удаление-подстроки"><i class="fa fa-check"></i><b>3.7.4</b> Удаление подстроки<span></span></a></li>
<li class="chapter" data-level="3.7.5" data-path="strings.html"><a href="strings.html#транслитерация-строк"><i class="fa fa-check"></i><b>3.7.5</b> Транслитерация строк<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="strings.html"><a href="strings.html#регулярные-выражения"><i class="fa fa-check"></i><b>3.8</b> Регулярные выражения<span></span></a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="strings.html"><a href="strings.html#экранирование-метасимволов"><i class="fa fa-check"></i><b>3.8.1</b> Экранирование метасимволов<span></span></a></li>
<li class="chapter" data-level="3.8.2" data-path="strings.html"><a href="strings.html#классы-знаков"><i class="fa fa-check"></i><b>3.8.2</b> Классы знаков<span></span></a></li>
<li class="chapter" data-level="3.8.3" data-path="strings.html"><a href="strings.html#квантификация"><i class="fa fa-check"></i><b>3.8.3</b> Квантификация<span></span></a></li>
<li class="chapter" data-level="3.8.4" data-path="strings.html"><a href="strings.html#позиционная-проверка-look-arounds"><i class="fa fa-check"></i><b>3.8.4</b> Позиционная проверка (look arounds)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="strings.html"><a href="strings.html#определение-языка"><i class="fa fa-check"></i><b>3.9</b> Определение языка<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="strings.html"><a href="strings.html#расстояния-между-строками"><i class="fa fa-check"></i><b>3.10</b> Расстояния между строками<span></span></a></li>
<li class="chapter" data-level="3.11" data-path="strings.html"><a href="strings.html#дополнительные-задания"><i class="fa fa-check"></i><b>3.11</b> Дополнительные задания:<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data_presentation.html"><a href="data_presentation.html"><i class="fa fa-check"></i><b>4</b> Представление данных: <code>rmarkdown</code><span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="data_presentation.html"><a href="data_presentation.html#rmarkdown"><i class="fa fa-check"></i><b>4.1</b> <code>rmarkdown</code><span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data_presentation.html"><a href="data_presentation.html#установка"><i class="fa fa-check"></i><b>4.1.1</b> Установка<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="data_presentation.html"><a href="data_presentation.html#составляющие-rmarkdown-документа"><i class="fa fa-check"></i><b>4.1.2</b> Составляющие <code>rmarkdown</code>-документа<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="data_presentation.html"><a href="data_presentation.html#пример-rmarkdown-документа"><i class="fa fa-check"></i><b>4.1.3</b> Пример <code>rmarkdown</code>-документа<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="data_presentation.html"><a href="data_presentation.html#markdown"><i class="fa fa-check"></i><b>4.1.4</b> <code>Markdown</code><span></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="data_presentation.html"><a href="data_presentation.html#pandoc"><i class="fa fa-check"></i><b>4.1.5</b> <code>Pandoc</code><span></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="data_presentation.html"><a href="data_presentation.html#code-chunks"><i class="fa fa-check"></i><b>4.1.6</b> Code chunks<span></span></a></li>
<li class="chapter" data-level="4.1.7" data-path="data_presentation.html"><a href="data_presentation.html#yaml-шапка"><i class="fa fa-check"></i><b>4.1.7</b> YAML шапка<span></span></a></li>
<li class="chapter" data-level="4.1.8" data-path="data_presentation.html"><a href="data_presentation.html#где-хостить-.html"><i class="fa fa-check"></i><b>4.1.8</b> Где хостить <code>.html</code>?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data_presentation.html"><a href="data_presentation.html#бывают-и-другие-способы-представления-данных"><i class="fa fa-check"></i><b>4.2</b> Бывают и другие способы представления данных<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><a href="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><i class="fa fa-check"></i><b>5</b> Работа с текстами: <code>gutenbergr</code>, <code>tidytext</code>, <code>stopwords</code><span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><a href="работа-с-текстами-gutenbergr-tidytext-stopwords.html#загрузка-текста-в-r"><i class="fa fa-check"></i><b>5.1</b> Загрузка текста в R<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><a href="работа-с-текстами-gutenbergr-tidytext-stopwords.html#пакет-gutenbergr"><i class="fa fa-check"></i><b>5.2</b> Пакет <code>gutenbergr</code><span></span></a></li>
<li class="chapter" data-level="5.3" data-path="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><a href="работа-с-текстами-gutenbergr-tidytext-stopwords.html#библиотека-tidytext"><i class="fa fa-check"></i><b>5.3</b> Библиотека <code>tidytext</code><span></span></a></li>
<li class="chapter" data-level="5.4" data-path="работа-с-текстами-gutenbergr-tidytext-stopwords.html"><a href="работа-с-текстами-gutenbergr-tidytext-stopwords.html#пакет-stopwords"><i class="fa fa-check"></i><b>5.4</b> Пакет <code>stopwords</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="работа-со-временем-lubridate.html"><a href="работа-со-временем-lubridate.html"><i class="fa fa-check"></i><b>6</b> Работа со временем: <code>lubridate</code><span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="работа-со-временем-lubridate.html"><a href="работа-со-временем-lubridate.html#создание-даты"><i class="fa fa-check"></i><b>6.1</b> Создание даты<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="работа-со-временем-lubridate.html"><a href="работа-со-временем-lubridate.html#извлечение-компонентов-даты"><i class="fa fa-check"></i><b>6.2</b> Извлечение компонентов даты<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="работа-со-временем-lubridate.html"><a href="работа-со-временем-lubridate.html#операции-с-датами"><i class="fa fa-check"></i><b>6.3</b> Операции с датами<span></span></a></li>
<li class="chapter" data-level="6.4" data-path="работа-со-временем-lubridate.html"><a href="работа-со-временем-lubridate.html#визуализация-времени-данные-левада-центра"><i class="fa fa-check"></i><b>6.4</b> Визуализация времени: данные Левада-центра<span></span></a></li>
</ul></li>
<li><a href="ссылки-на-литературу.html#ссылки-на-литературу">Ссылки на литературу<span></span></a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Наука о данных в R для программы Цифровых гуманитарных исследований</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="strings" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Работа со строками<a href="strings.html#strings" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="работа-со-строками-в-r" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Работа со строками в R<a href="strings.html#работа-со-строками-в-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для работы со строками можно использовать:</p>
<ul>
<li>базовый R</li>
<li>пакет <code>stringr</code> (часть <code>tidyverse</code>)</li>
<li>пакет <code>stringi</code> – отдельный пакет, так что не забудьте его установить:</li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="strings.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringi&quot;</span>)</span>
<span id="cb89-2"><a href="strings.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb89-3"><a href="strings.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span></code></pre></div>
<p>Мы будем пользоваться в основном пакетами <code>stingr</code> и <code>stringi</code>, так как они в большинстве случаях удобнее. К счастью функции этих пакетов легко отличить от остальных: функции пакет <code>stringr</code> всегда начинаются с <code>str_</code>, а функции пакета <code>stringi</code> — c <code>stri_</code>.</p>
<p>Существует <a href="https://github.com/rstudio/cheatsheets/raw/main/strings.pdf">cheat sheet по <code>stringr</code></a>.</p>
</div>
<div id="как-получить-строку" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Как получить строку?<a href="strings.html#как-получить-строку" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>следите за кавычками</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="strings.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;the quick brown fox jumps over the lazy dog&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;the quick brown fox jumps over the lazy dog&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="strings.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;the quick brown fox jumps over the lazy dog&#39;</span></span></code></pre></div>
<pre><code>## [1] &quot;the quick brown fox jumps over the lazy dog&quot;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="strings.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;the quick &#39;brown&#39; fox jumps over the lazy dog&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;the quick &#39;brown&#39; fox jumps over the lazy dog&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="strings.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;the quick &quot;brown&quot; fox jumps over the lazy dog&#39;</span></span></code></pre></div>
<pre><code>## [1] &quot;the quick \&quot;brown\&quot; fox jumps over the lazy dog&quot;</code></pre>
<ul>
<li>пустая строка</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="strings.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;&quot;</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="strings.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;</span></span></code></pre></div>
<pre><code>## [1] &quot;&quot;</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="strings.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">character</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;&quot; &quot;&quot; &quot;&quot;</code></pre>
<ul>
<li>преобразование</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="strings.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="strings.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>## [1] &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot;</code></pre>
<ul>
<li>встроенные векторы</li>
</ul>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="strings.html#cb108-1" aria-hidden="true" tabindex="-1"></a>letters</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="strings.html#cb110-1" aria-hidden="true" tabindex="-1"></a>LETTERS</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
## [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="strings.html#cb112-1" aria-hidden="true" tabindex="-1"></a>month.name</span></code></pre></div>
<pre><code>##  [1] &quot;January&quot;   &quot;February&quot;  &quot;March&quot;     &quot;April&quot;     &quot;May&quot;       &quot;June&quot;     
##  [7] &quot;July&quot;      &quot;August&quot;    &quot;September&quot; &quot;October&quot;   &quot;November&quot;  &quot;December&quot;</code></pre>
<ul>
<li>Создание рандомных строк</li>
</ul>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="strings.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb114-2"><a href="strings.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_strings</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">length =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">14</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;uwHpd&quot;          &quot;Wj8ehS&quot;         &quot;ivFSwy7&quot;        &quot;TYu8zw5V&quot;      
##  [5] &quot;OuRpjoOg0&quot;      &quot;p0CubNR2yQ&quot;     &quot;xtdycKLOm2k&quot;    &quot;fAGVfylZqBGp&quot;  
##  [9] &quot;gE28DTCi0NV0a&quot;  &quot;9MemYE55If0Cvv&quot;</code></pre>
<ul>
<li>Перемешивает символы внутри строки</li>
</ul>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="strings.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_shuffle</span>(<span class="st">&quot;любя, съешь щипцы, — вздохнёт мэр, — кайф жгуч&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;,цо м,пюзгу   сл аиъ—в кжряд,ыщьчебэн х—штё фй&quot;</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="strings.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_shuffle</span>(month.name)</span></code></pre></div>
<pre><code>##  [1] &quot;aJayunr&quot;   &quot;eyrbraFu&quot;  &quot;achMr&quot;     &quot;Aplri&quot;     &quot;ayM&quot;       &quot;Jnue&quot;     
##  [7] &quot;uJly&quot;      &quot;usuAgt&quot;    &quot;tpebermSe&quot; &quot;tOecrbo&quot;   &quot;oeNembvr&quot;  &quot;Dmceerbe&quot;</code></pre>
<ul>
<li>Генерирует псевдорандомный текст <a href="ссылки-на-литературу.html#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="strings.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_rand_lipsum</span>(<span class="at">nparagraphs =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Lorem ipsum dolor sit amet, donec sit nunc urna sed ultricies ac pharetra orci luctus iaculis, ac tincidunt cum. Neque eu semper at sociosqu hendrerit. Eu aliquet lacus, eu hendrerit donec aliquam eros. Risus nibh, quam in sit facilisi ipsum. Amet sem sed donec sed molestie scelerisque tincidunt. Nisl donec et facilisis interdum non sed dolor purus. In ipsum dignissim torquent velit nec aliquam pellentesque. Ac, adipiscing, neque et at torquent, vestibulum ullamcorper. Ad dictumst enim velit non nulla felis habitant. Egestas placerat consectetur, dictum nostra sed nec. Erat phasellus dolor libero aliquam viverra. Vestibulum leo et. Suscipit egestas in in montes, sapien gravida? Conubia purus varius ut nec feugiat.&quot;
## [2] &quot;Risus eleifend magnis neque diam, suspendisse ullamcorper nulla adipiscing malesuada massa, nisi sociosqu velit id et. Aliquam facilisis et aenean. Parturient vel ac in convallis, massa diam nibh. Nulla interdum cursus et. Natoque amet, ut praesent. Tortor ultrices a consectetur, augue natoque class faucibus? Ut sed arcu elementum magna. Dignissim ac facilisi quis ut nisl eu, massa.&quot;</code></pre>
</div>
<div id="соединение-и-разделение-строк" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Соединение и разделение строк<a href="strings.html#соединение-и-разделение-строк" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Соединенить строки можно используя функцию <code>str_c()</code>, в которую, как и в функции <code>с()</code>, можно перечислять элементы через запятую:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="strings.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="strings.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["merge"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Za"},{"1":"Y","2":"b","3":"Yb"},{"1":"X","2":"c","3":"Xc"},{"1":"W","2":"d","3":"Wd"},{"1":"V","2":"e","3":"Ve"},{"1":"U","2":"f","3":"Uf"},{"1":"T","2":"g","3":"Tg"},{"1":"S","2":"h","3":"Sh"},{"1":"R","2":"i","3":"Ri"},{"1":"Q","2":"j","3":"Qj"},{"1":"P","2":"k","3":"Pk"},{"1":"O","2":"l","3":"Ol"},{"1":"N","2":"m","3":"Nm"},{"1":"M","2":"n","3":"Mn"},{"1":"L","2":"o","3":"Lo"},{"1":"K","2":"p","3":"Kp"},{"1":"J","2":"q","3":"Jq"},{"1":"I","2":"r","3":"Ir"},{"1":"H","2":"s","3":"Hs"},{"1":"G","2":"t","3":"Gt"},{"1":"F","2":"u","3":"Fu"},{"1":"E","2":"v","3":"Ev"},{"1":"D","2":"w","3":"Dw"},{"1":"C","2":"x","3":"Cx"},{"1":"B","2":"y","3":"By"},{"1":"A","2":"z","3":"Az"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Кроме того, если хочется, можно использовать особенный разделитель, указав его в аргументе <code>sep</code>:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="strings.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="strings.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["merge"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Z_a"},{"1":"Y","2":"b","3":"Y_b"},{"1":"X","2":"c","3":"X_c"},{"1":"W","2":"d","3":"W_d"},{"1":"V","2":"e","3":"V_e"},{"1":"U","2":"f","3":"U_f"},{"1":"T","2":"g","3":"T_g"},{"1":"S","2":"h","3":"S_h"},{"1":"R","2":"i","3":"R_i"},{"1":"Q","2":"j","3":"Q_j"},{"1":"P","2":"k","3":"P_k"},{"1":"O","2":"l","3":"O_l"},{"1":"N","2":"m","3":"N_m"},{"1":"M","2":"n","3":"M_n"},{"1":"L","2":"o","3":"L_o"},{"1":"K","2":"p","3":"K_p"},{"1":"J","2":"q","3":"J_q"},{"1":"I","2":"r","3":"I_r"},{"1":"H","2":"s","3":"H_s"},{"1":"G","2":"t","3":"G_t"},{"1":"F","2":"u","3":"F_u"},{"1":"E","2":"v","3":"E_v"},{"1":"D","2":"w","3":"D_w"},{"1":"C","2":"x","3":"C_x"},{"1":"B","2":"y","3":"B_y"},{"1":"A","2":"z","3":"A_z"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Аналогичным образом, для разделение строки на подстроки можно использовать функцию <code>separate()</code>. Это функция разносит разделенные элементы строки в соответствующие столбцы. У функции три обязательных аргумента: <code>col</code> — колонка, которую следует разделить, <code>into</code> — вектор названий новых столбец, <code>sep</code> — разделитель.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="strings.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">upper =</span> <span class="fu">rev</span>(LETTERS), <span class="at">smaller =</span> letters) <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="strings.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">merge =</span> <span class="fu">str_c</span>(upper, smaller, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="strings.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> merge, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;column_1&quot;</span>, <span class="st">&quot;column_2&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["upper"],"name":[1],"type":["chr"],"align":["left"]},{"label":["smaller"],"name":[2],"type":["chr"],"align":["left"]},{"label":["column_1"],"name":[3],"type":["chr"],"align":["left"]},{"label":["column_2"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"Z","2":"a","3":"Z","4":"a"},{"1":"Y","2":"b","3":"Y","4":"b"},{"1":"X","2":"c","3":"X","4":"c"},{"1":"W","2":"d","3":"W","4":"d"},{"1":"V","2":"e","3":"V","4":"e"},{"1":"U","2":"f","3":"U","4":"f"},{"1":"T","2":"g","3":"T","4":"g"},{"1":"S","2":"h","3":"S","4":"h"},{"1":"R","2":"i","3":"R","4":"i"},{"1":"Q","2":"j","3":"Q","4":"j"},{"1":"P","2":"k","3":"P","4":"k"},{"1":"O","2":"l","3":"O","4":"l"},{"1":"N","2":"m","3":"N","4":"m"},{"1":"M","2":"n","3":"M","4":"n"},{"1":"L","2":"o","3":"L","4":"o"},{"1":"K","2":"p","3":"K","4":"p"},{"1":"J","2":"q","3":"J","4":"q"},{"1":"I","2":"r","3":"I","4":"r"},{"1":"H","2":"s","3":"H","4":"s"},{"1":"G","2":"t","3":"G","4":"t"},{"1":"F","2":"u","3":"F","4":"u"},{"1":"E","2":"v","3":"E","4":"v"},{"1":"D","2":"w","3":"D","4":"w"},{"1":"C","2":"x","3":"C","4":"x"},{"1":"B","2":"y","3":"B","4":"y"},{"1":"A","2":"z","3":"A","4":"z"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Кроме того, есть инструмент <code>str_split()</code>, которая позволяет разбивать строки на подстроки, но возвращает <em>список</em>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="strings.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(month.name, <span class="st">&quot;r&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;Janua&quot; &quot;y&quot;    
## 
## [[2]]
## [1] &quot;Feb&quot; &quot;ua&quot;  &quot;y&quot;  
## 
## [[3]]
## [1] &quot;Ma&quot; &quot;ch&quot;
## 
## [[4]]
## [1] &quot;Ap&quot; &quot;il&quot;
## 
## [[5]]
## [1] &quot;May&quot;
## 
## [[6]]
## [1] &quot;June&quot;
## 
## [[7]]
## [1] &quot;July&quot;
## 
## [[8]]
## [1] &quot;August&quot;
## 
## [[9]]
## [1] &quot;Septembe&quot; &quot;&quot;        
## 
## [[10]]
## [1] &quot;Octobe&quot; &quot;&quot;      
## 
## [[11]]
## [1] &quot;Novembe&quot; &quot;&quot;       
## 
## [[12]]
## [1] &quot;Decembe&quot; &quot;&quot;</code></pre>
</div>
<div id="количество-символов" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Количество символов<a href="strings.html#количество-символов" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="подсчет-количества-символов" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Подсчет количества символов<a href="strings.html#подсчет-количества-символов" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/5.01_str_length.png" /></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="strings.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="strings.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_charactars =</span> <span class="fu">str_count</span>(mn))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n_charactars"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"January","2":"7"},{"1":"February","2":"8"},{"1":"March","2":"5"},{"1":"April","2":"5"},{"1":"May","2":"3"},{"1":"June","2":"4"},{"1":"July","2":"4"},{"1":"August","2":"6"},{"1":"September","2":"9"},{"1":"October","2":"7"},{"1":"November","2":"8"},{"1":"December","2":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="подгонка-количества-символов" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Подгонка количества символов<a href="strings.html#подгонка-количества-символов" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Можно обрезать строки, используя функцию <code>str_trunc()</code>:</p>
<p><img src="images/5.02_str_trunc.png" /></p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="strings.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="strings.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Jan..."},{"1":"February","2":"Feb..."},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Sep..."},{"1":"October","2":"Oct..."},{"1":"November","2":"Nov..."},{"1":"December","2":"Dec..."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Можно решить с какой стороны обрезать, используя аргумент <code>side</code>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="strings.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="strings.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"...ary"},{"1":"February","2":"...ary"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"...ber"},{"1":"October","2":"...ber"},{"1":"November","2":"...ber"},{"1":"December","2":"...ber"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="strings.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="strings.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">&quot;center&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Ja...y"},{"1":"February","2":"Fe...y"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Se...r"},{"1":"October","2":"Oc...r"},{"1":"November","2":"No...r"},{"1":"December","2":"De...r"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Можно заменить многоточие, используя аргумент <code>ellipsis</code>:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="strings.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="strings.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_trunc</span>(mn, <span class="dv">3</span>, <span class="at">ellipsis =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Jan"},{"1":"February","2":"Feb"},{"1":"March","2":"Mar"},{"1":"April","2":"Apr"},{"1":"May","2":"May"},{"1":"June","2":"Jun"},{"1":"July","2":"Jul"},{"1":"August","2":"Aug"},{"1":"September","2":"Sep"},{"1":"October","2":"Oct"},{"1":"November","2":"Nov"},{"1":"December","2":"Dec"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Можно наоборот “раздуть” строку:</p>
<p><img src="images/5.03_str_pad.png" /></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="strings.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="strings.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"January"},{"1":"February","2":"February"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"September"},{"1":"October","2":"October"},{"1":"November","2":"November"},{"1":"December","2":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Опять же есть аргумент <code>side</code>:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="strings.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="strings.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>,  <span class="at">side =</span> <span class="st">&quot;right&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"January"},{"1":"February","2":"February"},{"1":"March","2":"March"},{"1":"April","2":"April"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"September"},{"1":"October","2":"October"},{"1":"November","2":"November"},{"1":"December","2":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Также можно выбрать, чем “раздувать строку”:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="strings.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="strings.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mn_new =</span> <span class="fu">str_pad</span>(mn, <span class="dv">10</span>,  <span class="at">pad =</span> <span class="st">&quot;.&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mn_new"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"...January"},{"1":"February","2":"..February"},{"1":"March","2":".....March"},{"1":"April","2":".....April"},{"1":"May","2":".......May"},{"1":"June","2":"......June"},{"1":"July","2":"......July"},{"1":"August","2":"....August"},{"1":"September","2":".September"},{"1":"October","2":"...October"},{"1":"November","2":"..November"},{"1":"December","2":"..December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="rmdtask">
<p>
На Pudding вышла <a href="https://pudding.cool/2019/10/pubs/">статья
про английские пабы</a>. <a
href="https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/UK_pubs.csv">Здесь</a>
лежит немного обработанный датасет, которые они использовали.
Визуализируйте 40 самых частотоных названий пабов в Великобритании,
отложив по оси x количество символов, а по оси y – количество баров с
таким названием.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-88-1.png" width="672" /></p>
<details>
<summary>
📋 список подсказок ➡
</summary>
<details>
<summary>
👁 Датасет скачался, что дальше? ➡
</summary>
Перво-наперво следует создать переменную, в которой бы хранилось количество каждого из баров. <br>
</details>
<details>
<summary>
👁 А как посчитать количество баров? ➡
</summary>
Это можно сделать при помощи функции <code>count()</code>. <br>
</details>
<details>
<summary>
👁 Бары пересчитали, что дальше? ➡
</summary>
Теперь нужно создать новую переменную, где бы хранилась информация о количестве символов. <br>
</details>
<details>
<summary>
👁 Все переменные есть, теперь рисуем? ➡
</summary>
Не совсем. Перед тем как рисовать нужно отфильтровать 50 самых популярных. <br>
</details>
<details>
<summary>
👁 Так, все готово, а какие <code>geom_()</code>? ➡
</summary>
На графике <code>geom_point()</code> и <code>geom_text_repel()</code> из пакета <code>ggrepel</code>. <br>
</details>
<details>
<summary>
👁 А-а-а-а! <code>could not find function "geom_text_repel"</code> ➡
</summary>
А вы включили библиотеку <code>ggrepel</code>? Если не включили, то функция, естественно будет недоступна. <br>
</details>
<details>
<summary>
👁 А-а-а-а! <code>geom_text_repel requires the following missing aesthetics: label"</code> ➡
</summary>
Все, как написала программа: чтобы писать какой-то текст в функции <code>aes()</code> нужно добавить аргумент <code>label = pub_name</code>. Иначе откуда он узнает, что ему писать? <br>
</details>
<details>
<summary>
👁 Фуф! Все готово! ➡
</summary>
А оси подписаны? А заголовок? А подпись про источник данных? <br>
</details>
</details>
</div>
</div>
<div id="сортировка" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Сортировка<a href="strings.html#сортировка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для сортировки существует базовая функция <code>sort()</code> и функция из <code>stringr</code> <code>str_sort()</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="strings.html#cb135-1" aria-hidden="true" tabindex="-1"></a>unsorted_latin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;I&quot;</span>, <span class="st">&quot;♥&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb135-2"><a href="strings.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(unsorted_latin)</span></code></pre></div>
<pre><code>## [1] &quot;♥&quot; &quot;I&quot; &quot;N&quot; &quot;Y&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="strings.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_latin)</span></code></pre></div>
<pre><code>## [1] &quot;♥&quot; &quot;I&quot; &quot;N&quot; &quot;Y&quot;</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="strings.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_latin, <span class="at">locale =</span> <span class="st">&quot;lt&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;♥&quot; &quot;I&quot; &quot;Y&quot; &quot;N&quot;</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="strings.html#cb141-1" aria-hidden="true" tabindex="-1"></a>unsorted_cyrillic <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;я&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;ж&quot;</span>)</span>
<span id="cb141-2"><a href="strings.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_cyrillic)</span></code></pre></div>
<pre><code>## [1] &quot;i&quot; &quot;ж&quot; &quot;я&quot;</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="strings.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(unsorted_cyrillic, <span class="at">locale =</span> <span class="st">&quot;ru_UA&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ж&quot; &quot;я&quot; &quot;i&quot;</code></pre>
<p>Список локалей на копмьютере можно посмотреть командой <code>stringi::stri_locale_list()</code>. Список всех локалей вообще приведен <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">на этой странице</a>. Еще полезные команды: <code>stringi::stri_locale_info</code> и <code>stringi::stri_locale_set</code>.</p>
<p>Не углубляясь в <a href="https://www.youtube.com/watch?v=BeoCbJPuvSE">разнообразие алгоритмов сортировки</a>, отмечу, что алгоритм по-умолчанию хуже работает с большими данными:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="strings.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb145-2"><a href="strings.html#cb145-2" aria-hidden="true" tabindex="-1"></a>huge <span class="ot">&lt;-</span> <span class="fu">sample</span>(letters, <span class="fl">1e7</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb145-3"><a href="strings.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(huge)</span></code></pre></div>
<pre><code>## [1] &quot;q&quot; &quot;e&quot; &quot;a&quot; &quot;y&quot; &quot;j&quot; &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="strings.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb147-2"><a href="strings.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(huge)</span>
<span id="cb147-3"><a href="strings.html#cb147-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   6.982   0.032   7.056</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="strings.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb149-2"><a href="strings.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(huge, <span class="at">method =</span> <span class="st">&quot;radix&quot;</span>)</span>
<span id="cb149-3"><a href="strings.html#cb149-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   0.319   0.040   0.359</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="strings.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb151-2"><a href="strings.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sort</span>(huge)</span>
<span id="cb151-3"><a href="strings.html#cb151-3" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   6.628   0.052   6.681</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="strings.html#cb153-1" aria-hidden="true" tabindex="-1"></a>huge_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(huge)</span>
<span id="cb153-2"><a href="strings.html#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(</span>
<span id="cb153-3"><a href="strings.html#cb153-3" aria-hidden="true" tabindex="-1"></a>  huge_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb153-4"><a href="strings.html#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(huge)</span>
<span id="cb153-5"><a href="strings.html#cb153-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##    user  system elapsed 
##  34.507   0.052  34.560</code></pre>
<p>Предварительный вывод: для больших данных – <code>sort(..., method = "radix")</code>.</p>
</div>
<div id="поиск-подстроки" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Поиск подстроки<a href="strings.html#поиск-подстроки" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Можно использовать функцию <code>str_detect()</code>:</p>
<p><img src="images/5.04_str_detect.png" /></p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="strings.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="strings.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_r =</span> <span class="fu">str_detect</span>(mn, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["has_r"],"name":[2],"type":["lgl"],"align":["right"]}],"data":[{"1":"January","2":"TRUE"},{"1":"February","2":"TRUE"},{"1":"March","2":"TRUE"},{"1":"April","2":"TRUE"},{"1":"May","2":"FALSE"},{"1":"June","2":"FALSE"},{"1":"July","2":"FALSE"},{"1":"August","2":"FALSE"},{"1":"September","2":"TRUE"},{"1":"October","2":"TRUE"},{"1":"November","2":"TRUE"},{"1":"December","2":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Кроме того, существует функция, которая возвращает индексы, а не значения <code>TRUE</code>/<code>FALSE</code>:
<img src="images/5.05_str_which.png" /></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="strings.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb156-2"><a href="strings.html#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">str_which</span>(mn, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"January"},{"1":"February"},{"1":"March"},{"1":"April"},{"1":"September"},{"1":"October"},{"1":"November"},{"1":"December"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Также можно посчитать количество вхождений какой-то подстроки:</p>
<p><img src="images/5.06_str_count.png" /></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="strings.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb157-2"><a href="strings.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">has_r =</span> <span class="fu">str_count</span>(mn, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["has_r"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"January","2":"1"},{"1":"February","2":"2"},{"1":"March","2":"1"},{"1":"April","2":"1"},{"1":"May","2":"0"},{"1":"June","2":"0"},{"1":"July","2":"0"},{"1":"August","2":"0"},{"1":"September","2":"1"},{"1":"October","2":"1"},{"1":"November","2":"1"},{"1":"December","2":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="изменение-строк" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Изменение строк<a href="strings.html#изменение-строк" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="изменение-регистра" class="section level3 hasAnchor" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Изменение регистра<a href="strings.html#изменение-регистра" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="strings.html#cb158-1" aria-hidden="true" tabindex="-1"></a>latin <span class="ot">&lt;-</span> <span class="st">&quot;tHe QuIcK BrOwN fOx JuMpS OvEr ThE lAzY dOg&quot;</span></span>
<span id="cb158-2"><a href="strings.html#cb158-2" aria-hidden="true" tabindex="-1"></a>cyrillic <span class="ot">&lt;-</span> <span class="st">&quot;лЮбЯ, сЪеШь ЩиПцЫ, — вЗдОхНёТ мЭр, — кАйФ жГуЧ&quot;</span></span>
<span id="cb158-3"><a href="strings.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(latin)</span></code></pre></div>
<pre><code>## [1] &quot;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="strings.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(cyrillic)</span></code></pre></div>
<pre><code>## [1] &quot;любя, съешь щипцы, — вздохнёт мэр, — кайф жгуч&quot;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="strings.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(latin)</span></code></pre></div>
<pre><code>## [1] &quot;The Quick Brown Fox Jumps Over The Lazy Dog&quot;</code></pre>
</div>
<div id="выделение-подстроки" class="section level3 hasAnchor" number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> Выделение подстроки<a href="strings.html#выделение-подстроки" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Подстроку в строке можно выделить двумя способами: по индексам функцией <code>str_sub()</code>, и по подстроке функцией <code>str_png()</code>.</p>
<p>extract(images/5.07_str_sub.png)</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="strings.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="strings.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_sub</span>(mn, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">2</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Ja"},{"1":"February","2":"Fe"},{"1":"March","2":"Ma"},{"1":"April","2":"Ap"},{"1":"May","2":"Ma"},{"1":"June","2":"Ju"},{"1":"July","2":"Ju"},{"1":"August","2":"Au"},{"1":"September","2":"Se"},{"1":"October","2":"Oc"},{"1":"November","2":"No"},{"1":"December","2":"De"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><img src="images/5.08_str_extract.png" /></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="strings.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb165-2"><a href="strings.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_extract</span>(mn, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"r"},{"1":"February","2":"r"},{"1":"March","2":"r"},{"1":"April","2":"r"},{"1":"May","2":"NA"},{"1":"June","2":"NA"},{"1":"July","2":"NA"},{"1":"August","2":"NA"},{"1":"September","2":"r"},{"1":"October","2":"r"},{"1":"November","2":"r"},{"1":"December","2":"r"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>По умолчанию функция <code>str_extract()</code> возвращает первое вхождение подстроки, соответствующей шаблону. Также существует функция <code>str_extract_all()</code>, которая возвращает все вхождения подстрок, соответствующих шаблону, однако возвращает объект типа список.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="strings.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(month.name, <span class="st">&quot;r&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;r&quot;
## 
## [[2]]
## [1] &quot;r&quot; &quot;r&quot;
## 
## [[3]]
## [1] &quot;r&quot;
## 
## [[4]]
## [1] &quot;r&quot;
## 
## [[5]]
## character(0)
## 
## [[6]]
## character(0)
## 
## [[7]]
## character(0)
## 
## [[8]]
## character(0)
## 
## [[9]]
## [1] &quot;r&quot;
## 
## [[10]]
## [1] &quot;r&quot;
## 
## [[11]]
## [1] &quot;r&quot;
## 
## [[12]]
## [1] &quot;r&quot;</code></pre>
</div>
<div id="замена-подстроки" class="section level3 hasAnchor" number="3.7.3">
<h3><span class="header-section-number">3.7.3</span> Замена подстроки<a href="strings.html#замена-подстроки" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Существует функция <code>str_replace()</code>, которая позволяет заменить одну подстроку в строке на другую:</p>
<p><img src="images/5.11_str_replace.png" /></p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="strings.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="strings.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_replace</span>(mn, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;R&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"JanuaRy"},{"1":"February","2":"FebRuary"},{"1":"March","2":"MaRch"},{"1":"April","2":"ApRil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"SeptembeR"},{"1":"October","2":"OctobeR"},{"1":"November","2":"NovembeR"},{"1":"December","2":"DecembeR"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Как и другие функции <code>str_replace()</code> делает лишь одну замену, чтобы заменить все вхождения подстроки следует использовать функцию <code>str_replace_all()</code>:</p>
<p><img src="images/5.12_str_replace_all.png" /></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="strings.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">mn =</span> month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="strings.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_replace_all</span>(mn, <span class="st">&quot;r&quot;</span>, <span class="st">&quot;R&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["mn"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"JanuaRy"},{"1":"February","2":"FebRuaRy"},{"1":"March","2":"MaRch"},{"1":"April","2":"ApRil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"SeptembeR"},{"1":"October","2":"OctobeR"},{"1":"November","2":"NovembeR"},{"1":"December","2":"DecembeR"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="удаление-подстроки" class="section level3 hasAnchor" number="3.7.4">
<h3><span class="header-section-number">3.7.4</span> Удаление подстроки<a href="strings.html#удаление-подстроки" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Для удаления подстроки на основе шаблона, используется функция <code>str_remove()</code> и <code>str_remove_all()</code></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="strings.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb170-2"><a href="strings.html#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_remove</span>(month.name, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["month.name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Januay"},{"1":"February","2":"Febuary"},{"1":"March","2":"Mach"},{"1":"April","2":"Apil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Septembe"},{"1":"October","2":"Octobe"},{"1":"November","2":"Novembe"},{"1":"December","2":"Decembe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="strings.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(month.name) <span class="sc">%&gt;%</span> </span>
<span id="cb171-2"><a href="strings.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mutate =</span> <span class="fu">str_remove_all</span>(month.name, <span class="st">&quot;r&quot;</span>))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["month.name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["mutate"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"January","2":"Januay"},{"1":"February","2":"Febuay"},{"1":"March","2":"Mach"},{"1":"April","2":"Apil"},{"1":"May","2":"May"},{"1":"June","2":"June"},{"1":"July","2":"July"},{"1":"August","2":"August"},{"1":"September","2":"Septembe"},{"1":"October","2":"Octobe"},{"1":"November","2":"Novembe"},{"1":"December","2":"Decembe"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="транслитерация-строк" class="section level3 hasAnchor" number="3.7.5">
<h3><span class="header-section-number">3.7.5</span> Транслитерация строк<a href="strings.html#транслитерация-строк" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>В пакете <code>stringi</code> сууществует достаточно много методов транслитераций строк, которые можно вывести командой <code>stri_trans_list()</code>. Вот пример использования некоторых из них:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="strings.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;latin-cyrillic&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;стринги&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="strings.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">&quot;сырники&quot;</span>, <span class="st">&quot;cyrillic-latin&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;syrniki&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="strings.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;latin-greek&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;στριγγι&quot;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="strings.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stri_trans_general</span>(<span class="st">&quot;stringi&quot;</span>, <span class="st">&quot;latin-armenian&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ստրինգի&quot;</code></pre>
<div class="rmdtask">
<p>
Вот два датасета:
</p>
<ul>
<li>
<a
href="https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/cities_of_russia.csv">список
городов России</a>
</li>
<li>
<a
href="https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/freq_dict_2011.csv">частотный
словарь русского языка [Шаров, Ляшевская 2011]</a>
</li>
</ul>
<p>
Определите сколько городов называется обычным словом русского языка
(например, город Орёл)? Не забудьте поменять ё на е.
</p>
</div>
<details>
<summary>
📋 список подсказок ➡
</summary>
<details>
<summary>
👁 Датасеты скачались, что дальше? ➡
</summary>
Надо их преобразовать к нужному виду и объединить. <br>
</details>
<details>
<summary>
👁 А как их соединить? Что у них общего? ➡
</summary>
В одном датасете есть переменная <code>city</code>, в другом – переменная <code>lemma</code>. Все города начинаются с большой буквы, все леммы с маленькой буквы. Я бы уменьшил букву в датасете с городами, сделал бы новый столбец в датасете с городами (например, <code>town</code>), соединил бы датасеты и посчитал бы сколько в результирующем датасете значений <code>town</code>.
<br>
</details>
<details>
<summary>
👁 А как соеднить? ➡
</summary>
Я бы использовал <code>dict %&gt;% ... %&gt;% inner_join(cities)</code>. Если в датасетах разные названия столбцов, то следует указывать какие столбцы, каким соответствуют:<code>dict %&gt;% ... %&gt;% inner_join(cities, by = c("lemma" = "city"))</code>
<br>
</details>
<details>
<summary>
👁 Соединилось вроде… А как посчитать? ➡
</summary>
Я бы, как обычно, использовал функцию <code>count()</code>.
<br>
</details>
</details>
</div>
</div>
<div id="регулярные-выражения" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> Регулярные выражения<a href="strings.html#регулярные-выражения" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Большинство функций из раздела об операциях над векторами (<code>str_detect()</code>, <code>str_extract()</code>, <code>str_remove()</code> и т. п.) имеют следующую структуру:</p>
<ul>
<li>строка, с которой работает функция</li>
<li>образец (pattern)</li>
</ul>
<p>Дальше мы будем использовать функцию <code>str_view_all()</code>, которая позволяет показывать, выделенное образцом в исходной строке.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="strings.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Я всегда путаю с и c&quot;</span>, <span class="st">&quot;c&quot;</span>) <span class="co"># я ищу латинскую c</span></span></code></pre></div>
<div id="htmlwidget-228ee45d79a34c19aeb5" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-228ee45d79a34c19aeb5">{"x":{"html":"<ul>\n  <li>Я всегда путаю с и <span class='match'>c<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div id="экранирование-метасимволов" class="section level3 hasAnchor" number="3.8.1">
<h3><span class="header-section-number">3.8.1</span> Экранирование метасимволов<a href="strings.html#экранирование-метасимволов" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="strings.html#cb181-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;Всем известно, что 4$</span><span class="sc">\\</span><span class="st">2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]&quot;</span></span>
<span id="cb181-2"><a href="strings.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;$&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-643c5add3cbeb49253c6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-643c5add3cbeb49253c6">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]<span class='match'><\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="strings.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-c75da7e568ee2a9f199f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-c75da7e568ee2a9f199f">{"x":{"html":"<ul>\n  <li>Всем известно, что 4<span class='match'>$<\/span>\\2 + 3<span class='match'>$<\/span> * 5 = 17<span class='match'>$<\/span>? Да? Ну хорошо (а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="strings.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-085167ac2d569f0f908d" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-085167ac2d569f0f908d">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен)<span class='match'>.<\/span> [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="strings.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">*&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-883ad9a237fbf413ca9a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-883ad9a237fbf413ca9a">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ <span class='match'>*<\/span> 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="strings.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">+&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-b6a74662ab76d79ae4fe" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b6a74662ab76d79ae4fe">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 <span class='match'>+<\/span> 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="strings.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">?&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-6057ff8699a0f636834a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-6057ff8699a0f636834a">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$<span class='match'>?<\/span> Да<span class='match'>?<\/span> Ну хорошо (а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="strings.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">(&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-596f703ebb3131883e19" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-596f703ebb3131883e19">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо <span class='match'>(<\/span>а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="strings.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">)&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-89addd0d2d684b688820" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-89addd0d2d684b688820">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен<span class='match'>)<\/span>. [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="strings.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">|&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-fa9e20cb60c76ae7a0aa" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-fa9e20cb60c76ae7a0aa">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [<span class='match'>|<\/span>}^{<span class='match'>|<\/span>]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="strings.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">^&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-58f60a5edc9ee0b11713" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-58f60a5edc9ee0b11713">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}<span class='match'>^<\/span>{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="strings.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">[&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-98d93e1d043bd345e328" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-98d93e1d043bd345e328">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). <span class='match'>[<\/span>|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="strings.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-fdd8caf63c737d4aec63" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-fdd8caf63c737d4aec63">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|<span class='match'>]<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="strings.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">{&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-8c4cf5337fa25d70b4d6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c4cf5337fa25d70b4d6">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^<span class='match'>{<\/span>|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="strings.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-ef9a891f3d1c2696abce" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-ef9a891f3d1c2696abce">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$\\2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|<span class='match'>}<\/span>^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="strings.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(a, <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-191fe0a2a4563527ca33" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-191fe0a2a4563527ca33">{"x":{"html":"<ul>\n  <li>Всем известно, что 4$<span class='match'>\\<\/span>2 + 3$ * 5 = 17$? Да? Ну хорошо (а то я не был уверен). [|}^{|]<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="классы-знаков" class="section level3 hasAnchor" number="3.8.2">
<h3><span class="header-section-number">3.8.2</span> Классы знаков<a href="strings.html#классы-знаков" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>\\d</code> – цифры. <code>\\D</code> – не цифры.</li>
</ul>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="strings.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-507040303c610b53bd7b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-507040303c610b53bd7b">{"x":{"html":"<ul>\n  <li>два <span class='match'>1<\/span><span class='match'>5<\/span> <span class='match'>4<\/span><span class='match'>2<\/span>. <span class='match'>4<\/span><span class='match'>2<\/span> <span class='match'>1<\/span><span class='match'>5<\/span>. <span class='match'>3<\/span><span class='match'>7<\/span> <span class='match'>0<\/span><span class='match'>8<\/span> <span class='match'>5<\/span>. <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span>!<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="strings.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">D&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-62301885e1fb74ff37d1" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-62301885e1fb74ff37d1">{"x":{"html":"<ul>\n  <li><span class='match'>д<\/span><span class='match'>в<\/span><span class='match'>а<\/span><span class='match'> <\/span>15<span class='match'> <\/span>42<span class='match'>.<\/span><span class='match'> <\/span>42<span class='match'> <\/span>15<span class='match'>.<\/span><span class='match'> <\/span>37<span class='match'> <\/span>08<span class='match'> <\/span>5<span class='match'>.<\/span><span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'>!<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>\\s</code> – пробелы. <code>\\S</code> – не пробелы.</li>
</ul>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="strings.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-2bd151edb3e14e897e4a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-2bd151edb3e14e897e4a">{"x":{"html":"<ul>\n  <li>два<span class='match'> <\/span>15<span class='match'> <\/span>42.<span class='match'> <\/span>42<span class='match'> <\/span>15.<span class='match'> <\/span>37<span class='match'> <\/span>08<span class='match'> <\/span>5.<span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'> <\/span>20!<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="strings.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">S&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-ed83d85090d35778adb5" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-ed83d85090d35778adb5">{"x":{"html":"<ul>\n  <li><span class='match'>д<\/span><span class='match'>в<\/span><span class='match'>а<\/span> <span class='match'>1<\/span><span class='match'>5<\/span> <span class='match'>4<\/span><span class='match'>2<\/span><span class='match'>.<\/span> <span class='match'>4<\/span><span class='match'>2<\/span> <span class='match'>1<\/span><span class='match'>5<\/span><span class='match'>.<\/span> <span class='match'>3<\/span><span class='match'>7<\/span> <span class='match'>0<\/span><span class='match'>8<\/span> <span class='match'>5<\/span><span class='match'>.<\/span> <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span><span class='match'>!<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>\\w</code> – не пробелы и не знаки препинания. <code>\\W</code> – пробелы и знаки препинания.</li>
</ul>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="strings.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-abba8abbfeff55233e38" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-abba8abbfeff55233e38">{"x":{"html":"<ul>\n  <li><span class='match'>д<\/span><span class='match'>в<\/span><span class='match'>а<\/span> <span class='match'>1<\/span><span class='match'>5<\/span> <span class='match'>4<\/span><span class='match'>2<\/span>. <span class='match'>4<\/span><span class='match'>2<\/span> <span class='match'>1<\/span><span class='match'>5<\/span>. <span class='match'>3<\/span><span class='match'>7<\/span> <span class='match'>0<\/span><span class='match'>8<\/span> <span class='match'>5<\/span>. <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span>!<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="strings.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">W&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-515a8e6c6a42b242b154" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-515a8e6c6a42b242b154">{"x":{"html":"<ul>\n  <li>два<span class='match'> <\/span>15<span class='match'> <\/span>42<span class='match'>.<\/span><span class='match'> <\/span>42<span class='match'> <\/span>15<span class='match'>.<\/span><span class='match'> <\/span>37<span class='match'> <\/span>08<span class='match'> <\/span>5<span class='match'>.<\/span><span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'>!<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>произвольная группа символов и обратная к ней</li>
</ul>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="strings.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Умей мечтать, не став рабом мечтанья&quot;</span>, <span class="st">&quot;[оауиыэёеяю]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-b3af5237c766d6840294" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b3af5237c766d6840294">{"x":{"html":"<ul>\n  <li>Ум<span class='match'>е<\/span>й м<span class='match'>е<\/span>чт<span class='match'>а<\/span>ть, н<span class='match'>е<\/span> ст<span class='match'>а<\/span>в р<span class='match'>а<\/span>б<span class='match'>о<\/span>м м<span class='match'>е<\/span>чт<span class='match'>а<\/span>нь<span class='match'>я<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="strings.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;И мыслить, мысли не обожествив&quot;</span>, <span class="st">&quot;[^оауиыэёеяю]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-36f6b2317e27bd9fa260" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-36f6b2317e27bd9fa260">{"x":{"html":"<ul>\n  <li><span class='match'>И<\/span><span class='match'> <\/span><span class='match'>м<\/span>ы<span class='match'>с<\/span><span class='match'>л<\/span>и<span class='match'>т<\/span><span class='match'>ь<\/span><span class='match'>,<\/span><span class='match'> <\/span><span class='match'>м<\/span>ы<span class='match'>с<\/span><span class='match'>л<\/span>и<span class='match'> <\/span><span class='match'>н<\/span>е<span class='match'> <\/span>о<span class='match'>б<\/span>о<span class='match'>ж<\/span>е<span class='match'>с<\/span><span class='match'>т<\/span><span class='match'>в<\/span>и<span class='match'>в<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>встроенные группы символов</li>
</ul>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="strings.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;[0-9]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-9af6d91a058b5d38f341" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-9af6d91a058b5d38f341">{"x":{"html":"<ul>\n  <li>два <span class='match'>1<\/span><span class='match'>5<\/span> <span class='match'>4<\/span><span class='match'>2<\/span>. <span class='match'>4<\/span><span class='match'>2<\/span> <span class='match'>1<\/span><span class='match'>5<\/span>. <span class='match'>3<\/span><span class='match'>7<\/span> <span class='match'>0<\/span><span class='match'>8<\/span> <span class='match'>5<\/span>. <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span> <span class='match'>2<\/span><span class='match'>0<\/span>!<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="strings.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;[а-я]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-039a16303f636d937570" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-039a16303f636d937570">{"x":{"html":"<ul>\n  <li>К<span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>л<\/span> <span class='match'>у<\/span> К<span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>ы<\/span> <span class='match'>у<\/span><span class='match'>к<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span> <span class='match'>к<\/span><span class='match'>о<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span><span class='match'>л<\/span><span class='match'>ы<\/span>, <span class='match'>а<\/span> К<span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>а<\/span> <span class='match'>у<\/span> К<span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>л<\/span><span class='match'>а<\/span> <span class='match'>у<\/span><span class='match'>к<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span><span class='match'>а<\/span> <span class='match'>к<\/span><span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>н<\/span><span class='match'>е<\/span><span class='match'>т<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="strings.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;[А-Я]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-e69123c4ae3ae3c6840c" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-e69123c4ae3ae3c6840c">{"x":{"html":"<ul>\n  <li><span class='match'>К<\/span>арл у <span class='match'>К<\/span>лары украл кораллы, а <span class='match'>К<\/span>лара у <span class='match'>К<\/span>арла украла кларнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="strings.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;[А-я]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-75e75864397e626acdc0" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-75e75864397e626acdc0">{"x":{"html":"<ul>\n  <li><span class='match'>К<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>л<\/span> <span class='match'>у<\/span> <span class='match'>К<\/span><span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>ы<\/span> <span class='match'>у<\/span><span class='match'>к<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span> <span class='match'>к<\/span><span class='match'>о<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span><span class='match'>л<\/span><span class='match'>ы<\/span>, <span class='match'>а<\/span> <span class='match'>К<\/span><span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>а<\/span> <span class='match'>у<\/span> <span class='match'>К<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>л<\/span><span class='match'>а<\/span> <span class='match'>у<\/span><span class='match'>к<\/span><span class='match'>р<\/span><span class='match'>а<\/span><span class='match'>л<\/span><span class='match'>а<\/span> <span class='match'>к<\/span><span class='match'>л<\/span><span class='match'>а<\/span><span class='match'>р<\/span><span class='match'>н<\/span><span class='match'>е<\/span><span class='match'>т<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="strings.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;The quick brown Fox jumps over the lazy Dog&quot;</span>, <span class="st">&quot;[a-z]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-473fc444c88e33097842" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-473fc444c88e33097842">{"x":{"html":"<ul>\n  <li>T<span class='match'>h<\/span><span class='match'>e<\/span> <span class='match'>q<\/span><span class='match'>u<\/span><span class='match'>i<\/span><span class='match'>c<\/span><span class='match'>k<\/span> <span class='match'>b<\/span><span class='match'>r<\/span><span class='match'>o<\/span><span class='match'>w<\/span><span class='match'>n<\/span> F<span class='match'>o<\/span><span class='match'>x<\/span> <span class='match'>j<\/span><span class='match'>u<\/span><span class='match'>m<\/span><span class='match'>p<\/span><span class='match'>s<\/span> <span class='match'>o<\/span><span class='match'>v<\/span><span class='match'>e<\/span><span class='match'>r<\/span> <span class='match'>t<\/span><span class='match'>h<\/span><span class='match'>e<\/span> <span class='match'>l<\/span><span class='match'>a<\/span><span class='match'>z<\/span><span class='match'>y<\/span> D<span class='match'>o<\/span><span class='match'>g<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="strings.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;два 15 42. 42 15. 37 08 5. 20 20 20!&quot;</span>, <span class="st">&quot;[^0-9]&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-cd243fdd1d9f83f91b78" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-cd243fdd1d9f83f91b78">{"x":{"html":"<ul>\n  <li><span class='match'>д<\/span><span class='match'>в<\/span><span class='match'>а<\/span><span class='match'> <\/span>15<span class='match'> <\/span>42<span class='match'>.<\/span><span class='match'> <\/span>42<span class='match'> <\/span>15<span class='match'>.<\/span><span class='match'> <\/span>37<span class='match'> <\/span>08<span class='match'> <\/span>5<span class='match'>.<\/span><span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'> <\/span>20<span class='match'>!<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p><img src="images/5.13_alternates.png" /></p>
<ul>
<li>выбор из нескольких групп</li>
</ul>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="strings.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;лар|рал|арл&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-98210ef191aaceb431bf" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-98210ef191aaceb431bf">{"x":{"html":"<ul>\n  <li>К<span class='match'>арл<\/span> у К<span class='match'>лар<\/span>ы ук<span class='match'>рал<\/span> ко<span class='match'>рал<\/span>лы, а К<span class='match'>лар<\/span>а у К<span class='match'>арл<\/span>а ук<span class='match'>рал<\/span>а к<span class='match'>лар<\/span>нет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>произвольный символ</li>
</ul>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="strings.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Везет Сенька Саньку с Сонькой на санках. Санки скок, Сеньку с ног, Соньку в лоб, все — в сугроб&quot;</span>, <span class="st">&quot;[Сс].н&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5e3aa7280e2d20e98c96" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-5e3aa7280e2d20e98c96">{"x":{"html":"<ul>\n  <li>Везет <span class='match'>Сен<\/span>ька <span class='match'>Сан<\/span>ьку с <span class='match'>Сон<\/span>ькой на <span class='match'>сан<\/span>ках. <span class='match'>Сан<\/span>ки скок, <span class='match'>Сен<\/span>ьку <span class='match'>с н<\/span>ог, <span class='match'>Сон<\/span>ьку в лоб, все — в сугроб<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>знак начала и конца строки</li>
</ul>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="strings.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;от топота копыт пыль по полю летит.&quot;</span>, <span class="st">&quot;^о&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-158ade13b1bfada52299" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-158ade13b1bfada52299">{"x":{"html":"<ul>\n  <li><span class='match'>о<\/span>т топота копыт пыль по полю летит.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="strings.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;У ежа — ежата, у ужа — ужата&quot;</span>, <span class="st">&quot;жата$&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-9413dd05634d05430637" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-9413dd05634d05430637">{"x":{"html":"<ul>\n  <li>У ежа — ежата, у ужа — у<span class='match'>жата<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>есть еще другие группы и другие обозначения уже приведенных групп, см. <code>?regex</code></li>
</ul>
<p><img src="images/5.14_anchors.png" /></p>
</div>
<div id="квантификация" class="section level3 hasAnchor" number="3.8.3">
<h3><span class="header-section-number">3.8.3</span> Квантификация<a href="strings.html#квантификация" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>?</code> – ноль или один раз</li>
</ul>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="strings.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;еее?&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-187191424c2a33ab430b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-187191424c2a33ab430b">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>еее<\/span> животное<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>*</code> – ноль и более раз</li>
</ul>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="strings.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;ее*&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-bc75ea7d738b704b2bec" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-bc75ea7d738b704b2bec">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>еее<\/span> животно<span class='match'>е<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>+</code> – один и более раз</li>
</ul>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="strings.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;е+&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-e2beecef7d1f47fadd52" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-e2beecef7d1f47fadd52">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>еее<\/span> животно<span class='match'>е<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>{n}</code> – <code>n</code> раз</li>
</ul>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="strings.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;е{2}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-14c66580304fdf0c0216" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-14c66580304fdf0c0216">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>ее<\/span>е животное<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>{n,}</code> – <code>n</code> раз и более</li>
</ul>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="strings.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;е{1,}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-180485259328194f1a01" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-180485259328194f1a01">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>еее<\/span> животно<span class='match'>е<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li><code>{n,m}</code> – от <code>n</code> до <code>m</code>. Отсутствие пробела важно: <code>{1,2}</code> – правильно, <code>{1,␣2}</code> – неправильно.</li>
</ul>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="strings.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;хорошее длинношеее животное&quot;</span>, <span class="st">&quot;е{2,3}&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-3bb322fcbfabfdb13093" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-3bb322fcbfabfdb13093">{"x":{"html":"<ul>\n  <li>хорош<span class='match'>ее<\/span> длиннош<span class='match'>еее<\/span> животное<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>группировка символов</li>
</ul>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="strings.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Пушкиновед, Лермонтовед, Лермонтововед&quot;</span>, <span class="st">&quot;(ов)+&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5bb7f68cca430a2f9207" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-5bb7f68cca430a2f9207">{"x":{"html":"<ul>\n  <li>Пушкин<span class='match'>ов<\/span>ед, Лермонт<span class='match'>ов<\/span>ед, Лермонт<span class='match'>овов<\/span>ед<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="strings.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;беловатый, розоватый, розововатый&quot;</span>, <span class="st">&quot;(ов)+&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-f986006b33e347923628" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f986006b33e347923628">{"x":{"html":"<ul>\n  <li>бел<span class='match'>ов<\/span>атый, роз<span class='match'>ов<\/span>атый, роз<span class='match'>овов<\/span>атый<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<ul>
<li>жадный vs. нежадный алоритмы</li>
</ul>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="strings.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Пушкиновед, Лермонтовед, Лермонтововед&quot;</span>, <span class="st">&quot;в.*ед&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-61269570716950a4a35f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-61269570716950a4a35f">{"x":{"html":"<ul>\n  <li>Пушкино<span class='match'>вед, Лермонтовед, Лермонтововед<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="strings.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Пушкиновед, Лермонтовед, Лермонтововед&quot;</span>, <span class="st">&quot;в.*?ед&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-26b876696651dd08e592" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-26b876696651dd08e592">{"x":{"html":"<ul>\n  <li>Пушкино<span class='match'>вед<\/span>, Лермонто<span class='match'>вед<\/span>, Лермонто<span class='match'>вовед<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p><img src="images/5.15_quantifiers.png" /></p>
</div>
<div id="позиционная-проверка-look-arounds" class="section level3 hasAnchor" number="3.8.4">
<h3><span class="header-section-number">3.8.4</span> Позиционная проверка (look arounds)<a href="strings.html#позиционная-проверка-look-arounds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Позиционная проверка – выглядит достаточно непоследовательно даже в свете остальных регулярных выражений.</p>
<p>Давайте найдем все <em>а</em> <strong>перед</strong> <em>р</em>:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="strings.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;а(?=р)&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-36e5f12aa8f7514944b3" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-36e5f12aa8f7514944b3">{"x":{"html":"<ul>\n  <li>К<span class='match'>а<\/span>рл у Кл<span class='match'>а<\/span>ры украл кораллы, а Кл<span class='match'>а<\/span>ра у К<span class='match'>а<\/span>рла украла кл<span class='match'>а<\/span>рнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>А теперь все <em>а</em> <strong>перед</strong> <em>р</em> или <em>л</em>:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="strings.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;а(?=[рл])&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-aacebf2b5d66a77c447b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-aacebf2b5d66a77c447b">{"x":{"html":"<ul>\n  <li>К<span class='match'>а<\/span>рл у Кл<span class='match'>а<\/span>ры укр<span class='match'>а<\/span>л кор<span class='match'>а<\/span>ллы, а Кл<span class='match'>а<\/span>ра у К<span class='match'>а<\/span>рла укр<span class='match'>а<\/span>ла кл<span class='match'>а<\/span>рнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Давайте найдем все а <strong>после</strong> <em>р</em></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="strings.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;(?&lt;=р)а&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-fdba825c805e818be138" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-fdba825c805e818be138">{"x":{"html":"<ul>\n  <li>Карл у Клары укр<span class='match'>а<\/span>л кор<span class='match'>а<\/span>ллы, а Клар<span class='match'>а<\/span> у Карла укр<span class='match'>а<\/span>ла кларнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>А теперь все <em>а</em> <strong>после</strong> <em>р</em> или <em>л</em>:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="strings.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;(?&lt;=[рл])а&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-99c0e72f9cc113ccb994" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-99c0e72f9cc113ccb994">{"x":{"html":"<ul>\n  <li>Карл у Кл<span class='match'>а<\/span>ры укр<span class='match'>а<\/span>л кор<span class='match'>а<\/span>ллы, а Кл<span class='match'>а<\/span>р<span class='match'>а<\/span> у Карл<span class='match'>а<\/span> укр<span class='match'>а<\/span>л<span class='match'>а<\/span> кл<span class='match'>а<\/span>рнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Также у этих выражений есть формы с отрицанием. Давайте найдем все <em>р</em> <strong>не перед</strong> <em>а</em>:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="strings.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;р(?!а)&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-1eedae62bd71d212e341" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-1eedae62bd71d212e341">{"x":{"html":"<ul>\n  <li>Ка<span class='match'>р<\/span>л у Кла<span class='match'>р<\/span>ы украл кораллы, а Клара у Ка<span class='match'>р<\/span>ла украла кла<span class='match'>р<\/span>нет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>А теперь все <em>р</em> <strong>не после</strong> <em>а</em>:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="strings.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view_all</span>(<span class="st">&quot;Карл у Клары украл кораллы, а Клара у Карла украла кларнет&quot;</span>, <span class="st">&quot;(?&lt;!а)р&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-8a18dbb9ec73b2217f3a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-8a18dbb9ec73b2217f3a">{"x":{"html":"<ul>\n  <li>Карл у Клары ук<span class='match'>р<\/span>ал ко<span class='match'>р<\/span>аллы, а Клара у Карла ук<span class='match'>р<\/span>ала кларнет<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Запомнить с ходу это достаточно сложно, так что подсматривайте сюда:</p>
<p><img src="images/5.16_lookarounds.png" /></p>
<div class="rmdtask">
<p>
<a
href="https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/zabolockiy_merknut_znaki_zodiaka.txt">Вот
отсюда</a> можно скачать файл с текстом стихотворения Н. Заболоцкого
“Меркнут знаки задиака”. Посчитайте долю женских (ударение падает на
<strong>предпоследний</strong> слог рифмующихся слов) и мужских
(ударение падает на <strong>последний</strong> слог рифмующихся слов)
рифм в стихотворении.
</p>
</div>
<details>
<summary>
📋 список подсказок ➡
</summary>
<details>
<summary>
👁 Датасеты скачивается с ошибкой, почему? ➡
</summary>
Дело в том, что исходный файл в формате <code>.txt</code>, а не <code>.csv</code>. Его нужно скачивать, например, командой <code>read_lines()</code> <br>
</details>
<details>
<summary>
👁 Ошибка: <code>...applied to an object of class "character"</code> ➡
</summary>
Скачав файл Вы получили вектор со строками, где каждая элимент вектора – строка стихотворения. Создайте <code>tibble()</code>, тогда можно будет применять стандартные инструменты <code>tidyverse</code>.
<br>
</details>
<details>
<summary>
👁 Хорошо, <code>tibble()</code> создан, что дальше? ➡
</summary>
Дальше нужно создать переменную, из которой будет понятно, мужская в каждой строке рифма, или женская.
<br>
</details>
<details>
<summary>
👁 А как определить, какая рифма? Нужно с словарем сравнивать? ➡
</summary>
Формально говоря, определять рифму можно по косвенным признакам. Все стихотворение написано четырехстопным хореем, значит в нем либо 7, либо 8 слогов. Значит, посчитав количество слогов, мы поймем, какая перед нами рифма.
<br>
</details>
<details>
<summary>
👁 А как посчитать гласные? ➡
</summary>
Нужно написать регулярное выражение… вроде бы это тема нашего занятия…
<br>
</details>
<details>
<summary>
👁 Гласные посчитаны. А что дальше? ➡
</summary>
Ну теперь нужно посчитать, сколько каких длин (в количестве слогов) бывает в стихотворении. Это можно сделать при помощи функции <code>count()</code>.
<br>
</details>
<details>
<summary>
👁 А почему у меня есть строки длины 0 слогов ➡
</summary>
Ну, видимо, в стихотворении были пустые строки. Они использовались для разделения строф.
<br>
</details>
<details>
<summary>
👁 А почему у меня есть строки длины 6 слогов ➡
</summary>
Ну, видимо, Вы написали регулярное выражение, которое не учитывает, что гласные буквы могут быть еще и в начале строки, а значит написаны с большой буквы.
<br>
</details>
</details>
<div class="rmdtask">
<p>
В ходе анализа данных чаще всего бороться со строками и регулярными
выражениями приходится в процессе обработки неаккуратнособранных анкет.
Предлагаю обработать переменные <code>sex</code> и <code>age</code> <a
href="https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/mad_questionary.csv">такой
вот неудачно собранной анкеты</a> и построить следующий график:
</p>
</div>
<p><img src="images/mad_questionary_task.png" /></p>
<details>
<summary>
📋 список подсказок ➡
</summary>
<details>
<summary>
👁 А что это за <code>geom_...()</code>? ➡
</summary>
Это <a href="https://agricolamz.github.io/DS_for_DH/viz-1.html#%D0%B4%D0%BE%D1%82%D0%BF%D0%BB%D0%BE%D1%82"><code>geom_dotplot()</code></a> с аргументом <code>method = "histodot"</code> и с удаленной осью y при помощи команды <code>scale_y_continuous(NULL, breaks = NULL)</code>
<br>
</details>
<details>
<summary>
👁 Почему на графике рисутеся каждое значение возраста? ➡
</summary>
Если Вы все правильно преобразовали, должно помочь преобразование строковой переменной age в числовую при помощи функции as.integer().
<br>
</details>
</details>
</div>
</div>
<div id="определение-языка" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> Определение языка<a href="strings.html#определение-языка" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для определения языка существует два пакета <code>cld2</code> (вероятностный) и <code>cld3</code> (нейросеть).</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="strings.html#cb230-1" aria-hidden="true" tabindex="-1"></a>udhr_24 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/agricolamz/DS_for_DH/master/data/article_24_from_UDHR.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 6 Columns: 1</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): article_text</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="strings.html#cb234-1" aria-hidden="true" tabindex="-1"></a>udhr_24</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["article_text"],"name":[1],"type":["chr"],"align":["left"]}],"data":[{"1":"Каждый человек имеет право на отдых и досуг, включая право на разумное ограничение рабочего дня и на оплачиваемый периодический отпуск."},{"1":"Everyone has the right to rest and leisure, including reasonable limitation of working hours and periodic holidays with pay."},{"1":"Toute personne a droit au repos et aux loisirs et notamment à une limitation raisonnable de la durée du travail et à des congés payés périodiques."},{"1":"Toda persona tiene derecho al descanso, al disfrute del tiempo libre, a una limitación razonable de la duración del trabajo y a vacaciones periódicas pagadas."},{"1":"لكلِّ شخص حقٌّ في الراحة وأوقات الفراغ، وخصوصًا في تحديد معقول لساعات العمل وفي إجازات دورية مأجورة."},{"1":"人人有享有休息和闲暇的权利，包括工作时间有合理限制和定期给薪休假的权利。"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="strings.html#cb235-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language</span>(udhr_24<span class="sc">$</span>article_text)</span></code></pre></div>
<pre><code>## [1] &quot;ru&quot; &quot;en&quot; &quot;fr&quot; &quot;es&quot; &quot;ar&quot; &quot;zh&quot;</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="strings.html#cb237-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language</span>(udhr_24<span class="sc">$</span>article_text, <span class="at">lang_code =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;RUSSIAN&quot; &quot;ENGLISH&quot; &quot;FRENCH&quot;  &quot;SPANISH&quot; &quot;ARABIC&quot;  &quot;CHINESE&quot;</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="strings.html#cb239-1" aria-hidden="true" tabindex="-1"></a>cld3<span class="sc">::</span><span class="fu">detect_language</span>(udhr_24<span class="sc">$</span>article_text)</span></code></pre></div>
<pre><code>## [1] &quot;ru&quot; &quot;en&quot; &quot;fr&quot; &quot;es&quot; &quot;ar&quot; &quot;zh&quot;</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="strings.html#cb241-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Ты женат? Говорите ли по-английски?&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;bg&quot;</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="strings.html#cb243-1" aria-hidden="true" tabindex="-1"></a>cld3<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Ты женат? Говорите ли по-английски?&quot;</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="strings.html#cb245-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Варкалось. Хливкие шорьки пырялись по наве, и хрюкотали зелюки, как мюмзики в мове.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ru&quot;</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="strings.html#cb247-1" aria-hidden="true" tabindex="-1"></a>cld3<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Варкалось. Хливкие шорьки пырялись по наве, и хрюкотали зелюки, как мюмзики в мове.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;ru&quot;</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="strings.html#cb249-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Варчилось… Хлив&#39;язкі тхурки викрули, свербчись навкрузі, жасумновілі худоки гривіли зехряки в чузі.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;uk&quot;</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="strings.html#cb251-1" aria-hidden="true" tabindex="-1"></a>cld3<span class="sc">::</span><span class="fu">detect_language</span>(<span class="st">&quot;Варчилось… Хлив&#39;язкі тхурки викрули, свербчись навкрузі, жасумновілі худоки гривіли зехряки в чузі.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;uk&quot;</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="strings.html#cb253-1" aria-hidden="true" tabindex="-1"></a>cld2<span class="sc">::</span><span class="fu">detect_language_mixed</span>(<span class="st">&quot;Многие в нашей команде OpenDataScience занимаются state-of-the-art технологиями машинного обучения: DL-фреймворками, байесовскими методами машинного обучения, вероятностным программированием и не только.&quot;</span>)</span></code></pre></div>
<pre><code>## $classification
##   language code latin proportion
## 1  RUSSIAN   ru FALSE       0.87
## 2  ENGLISH   en  TRUE       0.11
## 3  UNKNOWN   un  TRUE       0.00
## 
## $bytes
## [1] 353
## 
## $reliabale
## [1] TRUE</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="strings.html#cb255-1" aria-hidden="true" tabindex="-1"></a>cld3<span class="sc">::</span><span class="fu">detect_language_mixed</span>(<span class="st">&quot;Многие в нашей команде OpenDataScience занимаются state-of-the-art технологиями машинного обучения: DL-фреймворками, байесовскими методами машинного обучения, вероятностным программированием и не только.&quot;</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["language"],"name":[1],"type":["chr"],"align":["left"]},{"label":["probability"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["reliable"],"name":[3],"type":["lgl"],"align":["right"]},{"label":["proportion"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"ru","2":"0.9983915","3":"TRUE","4":"0.88951844"},{"1":"en","2":"0.9992564","3":"TRUE","4":"0.05099150"},{"1":"sr","2":"0.4266235","3":"FALSE","4":"0.04815864"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="расстояния-между-строками" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> Расстояния между строками<a href="strings.html#расстояния-между-строками" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Существует много разных метрик для измерения расстояния между строками (см. <code>?`stringdist-metrics`</code>), в примерах используется расстояние Дамерау — Левенштейна. Данное расстояние получается при подсчете количества операций, которые нужно сделать, чтобы перевести одну строку в другую.</p>
<ul>
<li>вставка ab → aNb</li>
<li>удаление aOb → ab</li>
<li>замена символа aOb → aNb</li>
<li>перестановка символов ab → ba</li>
</ul>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="strings.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringdist)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;stringdist&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="strings.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stringdist</span>(<span class="st">&quot;корова&quot;</span>,<span class="st">&quot;корова&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="strings.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stringdist</span>(<span class="st">&quot;коровы&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;курица&quot;</span>, <span class="st">&quot;бык&quot;</span>, <span class="st">&quot;утка&quot;</span>, <span class="st">&quot;корова&quot;</span>, <span class="st">&quot;осел&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 4 6 6 1 5</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="strings.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">amatch</span>(<span class="fu">c</span>(<span class="st">&quot;быки&quot;</span>, <span class="st">&quot;коровы&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;курица&quot;</span>, <span class="st">&quot;бык&quot;</span>, <span class="st">&quot;утка&quot;</span>, <span class="st">&quot;корова&quot;</span>, <span class="st">&quot;осел&quot;</span>), <span class="at">maxDist =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2 4</code></pre>
</div>
<div id="дополнительные-задания" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> Дополнительные задания:<a href="strings.html#дополнительные-задания" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="rmdtask">
<p>
В <a
href="https://github.com/agricolamz/2020-2021-ds4dh/raw/master/data/realdonaldtrump.csv">датасет</a>
записаны твиты Донольда Трампа взятые с <a
href="https://www.kaggle.com/austinreese/trump-tweets">kaggle</a>.
Постройте график рассеяния, которые показывает связь количества ретвитов
и лайков. Чтобы убрать научную запись больших чисел используйте команду
<code>options(scipen = 999)</code>.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/trump-1.png" width="672" /></p>
<div class="rmdtask">
<p>
Постройте гистограмму, которая показывает распределения длины твитов
в символах. Какой метод определения размера ячейки использован на
приведенном графике? [Sturgers 1926], [Scott 1979] или [Freedman,
Diaconis 1981]?
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<div class="rmdtask">
<p>
Постройте график рассеивания, который бы показывал связь с длиной
твита во времени. Используя <code>geom_hline()</code>, наложите две
линии: 140 символов и 280. Сделайте прозрачность 0.1.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-138-1.png" width="672" /></p>
<div class="rmdtask">
<p>
Постройте график рассеивания, который бы показывал связь с длиной
твита во времени. Разбейте и раскрасьте твиты на основании наличия в них
интернет ссылок.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
<div class="rmdtask">
<p>
Можно ли утверждать, что твиты со ссылками длиннее? Постройте
вайолинплот, которые показывает распределение значений длины твитов в
зависимости от наличия в них интернет ссылок.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-142-1.png" width="672" /></p>
<div class="rmdtask">
<p>
Найдите твиты которые содержат корень america, которые встречаются
больше одного раза, и фасетизируйте по таким словам.
</p>
</div>
<p><img src="DS_for_DH_files/figure-html/unnamed-chunk-144-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="viz_1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data_presentation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/agricolamz/2021_2022_ds4dh/edit/master/06-strings.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DS_for_DH.pdf", "DS_for_DH.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
},
"self_contained": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
